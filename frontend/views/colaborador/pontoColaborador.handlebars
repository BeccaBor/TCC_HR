{{!-- Navbar global --}}
{{> navbarCola }}

{{!-- Ajustei os paths para apontar para /public, que é onde o backend está servindo os assets por enquanto --}}
{{!-- <link rel="stylesheet" href="/css/navbarCola.css"> --}}
<link rel="stylesheet" href="/css/pontoColaborador.css">

<section class="container-gestao">

  <!-- Sidebar (apenas botão de registrar + possível espaço leve) -->
  <aside class="sidebar">
    <button class="btn-primary" data-bs-toggle="modal" data-bs-target="#modalPonto">Marcar ponto</button>
 <button id="btnAtualizar" class="btn-small">Atualizar</button>
    
    </div>
  </aside>

  <!-- Conteúdo principal: tabela com últimos pontos do colaborador (maior, fora da sidebar) -->
  <section class="main-panel">
    <div class="registros-section">
      <div class="registros-header" style="display:flex; justify-content:space-between; align-items:center;">
        {{!-- <h4>Seus últimos registros</h4> --}}
       
      </div>

     <div class="box mt-3">
      <h4>Seus últimos pontos</h4>
      {{!-- <small class="text-muted">Visualização resumida na sidebar.</small> --}}
      <table class="tabelinha mt-2">
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Horas</th>
            <th>Data</th>
          </tr>
        </thead>
        <tbody id="listaUltimosPontos">
          <tr><td colspan="3">Carregando...</td></tr>
        </tbody>
      </table>
      </div>

      <div id="alertContainer" class="mt-3"></div>
    </div>
  </section>
</section>

<!-- MODAL Bootstrap (mesma estrutura do gerenciarPonto.hbs) -->
<div class="modal fade" id="modalPonto" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content popup">
      <div class="modal-header">
        <h5 class="modal-title">Folha de registro de ponto</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <div id="alertPopup" class="alert d-none"></div>

        <form id="formPonto" class="form-ponto">
          <label for="nome">Nome</label>
          <input type="text" id="nome" readonly>

          <label for="setor">Setor</label>
          <input type="text" id="setor" readonly>

          <label for="tipo_usuario">Tipo de usuário</label>
          <input type="text" id="tipo_usuario" readonly>

          <input type="hidden" id="tipo_registro">
          <input type="hidden" id="cnpj" value="{{usuario.cnpj}}">
          <input type="hidden" id="usuario_id" value="{{usuario.id}}">

          <label>Tipo de registro</label>
          <div class="tipo-group">
            <button type="button" class="tipo-btn" data-tipo="entrada">Entrada</button>
            <button type="button" class="tipo-btn" data-tipo="saida">Saída</button>
            <button type="button" class="tipo-btn" data-tipo="inicio_intervalo">Início intervalo</button>
            <button type="button" class="tipo-btn" data-tipo="fim_intervalo">Fim intervalo</button>
          </div>

          <label>Quantidade de horas</label>
          <div class="tipo-group">
            <input type="number" id="inputHoras" step="0.01" min="0.01" max="24" placeholder="Ex: 8.50" required>
            <div class="hora-btn-group">
              <button type="button" class="hora-btn" data-horas="8">8h</button>
              <button type="button" class="hora-btn" data-horas="6">6h</button>
              <button type="button" class="hora-btn" data-horas="4">4h</button>
            </div>
          </div>

          <div class="form-actions mt-3 text-center">
            <button type="submit" class="btn-primary">Marcar ponto</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Background Picker Modal / Panel -->

{{!-- Scripts: utiliza o pontoScript já existente + script de verificação de login --}}
<script src="/js/verificarLogin.js"></script>

{{!-- Script pequeno específico da página para popular a tabela principal com os pontos do colaborador --}}
<script src="/js/pontoScript.js"></script>
